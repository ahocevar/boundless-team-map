if(!window.app)window.app={};var app=window.app;
app.animation=function(){function b(a){a<1/2.75?a*=7.5625*a:a<2/2.75?(a-=1.5/2.75,a=7.5625*a*a+0.75):a<2.5/2.75?(a-=2.25/2.75,a=7.5625*a*a+0.9375):(a-=2.625/2.75,a=7.5625*a*a+0.984375);return a}function e(a){return Math.pow(2,-10*a)*Math.sin((a-0.075)*2*Math.PI/0.3)+1}return{pan:function(a,c,b){c=ol.animation.pan({duration:2E3,source:c});a.beforeRender(c);a.getView().setCenter(b)},elastic:function(a,c,b){c=ol.animation.pan({duration:2E3,easing:e,source:c});a.beforeRender(c);a.getView().setCenter(b)},
bounce:function(a,c,f){c=ol.animation.pan({duration:2E3,easing:b,source:c});a.beforeRender(c);a.getView().setCenter(f)},spin:function(a,c,b){var d=+new Date,c=ol.animation.pan({duration:2E3,source:c,start:d}),d=ol.animation.rotate({duration:2E3,rotation:2*Math.PI,start:d});a.beforeRender(c,d);a.getView().setCenter(b)},fly:function(a,c,b){var d=+new Date,c=ol.animation.pan({duration:2E3,source:c,start:d}),d=ol.animation.bounce({duration:2E3,resolution:4*a.getView().getResolution(),start:d});a.beforeRender(c,
d);a.getView().setCenter(b)},spiral:function(a,b,e){var d=+new Date,b=ol.animation.pan({duration:2E3,source:b,start:d}),g=ol.animation.bounce({duration:2E3,resolution:2*a.getView().getResolution(),start:d}),d=ol.animation.rotate({duration:2E3,rotation:-4*Math.PI,start:d});a.beforeRender(b,g,d);a.getView().setCenter(e)}}}();
var popup=new ol.Overlay({element:$("#popup")}),map=new ol.Map({overlays:[popup],target:"map",view:new ol.View({center:[40.71448,-74.00598].reverse(),minZoom:2,projection:"EPSG:4326",zoom:5})});map.getControls().removeAt(2);var world=new ol.FeatureOverlay({map:map,style:new ol.style.Style({fill:new ol.style.Fill({color:"#00A78D"})})}),team=new ol.FeatureOverlay({map:map,style:new ol.style.Style({image:new ol.style.Icon({anchor:[0.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"src/css/pin_lime.png"})})});
$.getJSON("world-110m.json",function(b){b=(new ol.format.TopoJSON).readFeaturesFromObject(b);world.setFeatures(b)});$.getJSON("boundlesslocations.geojson",function(b){b=(new ol.format.GeoJSON).readFeaturesFromObject(b);team.setFeatures(b)});var animations=["pan"];
window.setInterval(function(){var b=team.getFeatures();if(b){var e=b[Math.round(Math.random()*(b.length-1))],b=e.get("people").split("\n"),a=b[Math.round(Math.random()*(b.length-1))];$("#popup").tooltip("destroy");var c=e.getGeometry().getCoordinates(),b=animations[Math.round(Math.random()*(animations.length-1))];window.setTimeout(function(){popup.setPosition(c);$("#popup").tooltip({title:'<div class="person">'+a+'</div><div class="location">'+e.get("location")+"</div>",html:!0,placement:"bottom"});
$("#popup").tooltip("show")},2E3);app.animation[b](map,map.getView().getCenter(),c)}},5E3);