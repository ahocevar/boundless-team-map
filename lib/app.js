if(!window.app)window.app={};var app=window.app;
app.animation=function(){function d(a){a<1/2.75?a*=7.5625*a:a<2/2.75?(a-=1.5/2.75,a=7.5625*a*a+0.75):a<2.5/2.75?(a-=2.25/2.75,a=7.5625*a*a+0.9375):(a-=2.625/2.75,a=7.5625*a*a+0.984375);return a}function f(a){return Math.pow(2,-10*a)*Math.sin((a-0.075)*2*Math.PI/0.3)+1}return{pan:function(a,b,e){b=ol.animation.pan({duration:2E3,source:b});a.beforeRender(b);a.getView().setCenter(e)},elastic:function(a,b,e){b=ol.animation.pan({duration:2E3,easing:f,source:b});a.beforeRender(b);a.getView().setCenter(e)},
bounce:function(a,b,e){b=ol.animation.pan({duration:2E3,easing:d,source:b});a.beforeRender(b);a.getView().setCenter(e)},spin:function(a,b,e){var c=+new Date,b=ol.animation.pan({duration:2E3,source:b,start:c}),c=ol.animation.rotate({duration:2E3,rotation:2*Math.PI,start:c});a.beforeRender(b,c);a.getView().setCenter(e)},fly:function(a,b,e){var c=+new Date,b=ol.animation.pan({duration:2E3,source:b,start:c}),c=ol.animation.bounce({duration:2E3,resolution:4*a.getView().getResolution(),start:c});a.beforeRender(b,
c);a.getView().setCenter(e)},spiral:function(a,b,e){var c=+new Date,b=ol.animation.pan({duration:2E3,source:b,start:c}),d=ol.animation.bounce({duration:2E3,resolution:2*a.getView().getResolution(),start:c}),c=ol.animation.rotate({duration:2E3,rotation:-4*Math.PI,start:c});a.beforeRender(b,d,c);a.getView().setCenter(e)}}}();
var popup=new ol.Overlay({element:$("#popup")}),map=new ol.Map({overlays:[popup],target:"map",view:new ol.View({center:[40.71448,-74.00598].reverse(),minZoom:2,projection:"EPSG:4326",zoom:5})});map.getControls().removeAt(2);
var world=new ol.FeatureOverlay({map:map,style:new ol.style.Style({fill:new ol.style.Fill({color:"#00A78D"})})}),team=new ol.FeatureOverlay({map:map,style:new ol.style.Style({image:new ol.style.Icon({anchor:[0.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"src/css/pin_lime.png"})})}),worldSource=new ol.source.TopoJSON({url:"world-110m.json"});worldSource.once("change",function(){world.setFeatures(worldSource.getFeatures())});var teamSource=new ol.source.GeoJSON({url:"boundlesslocations.geojson"});
teamSource.once("change",function(){team.setFeatures(teamSource.getFeatures())});var animations=["pan"];
window.setInterval(function(){var d=team.getFeatures();if(d){var f=d[Math.round(Math.random()*(d.length-1))],d=f.get("people").split("\n"),a=d[Math.round(Math.random()*(d.length-1))];$("#popup").tooltip("destroy");var b=f.getGeometry().getCoordinates(),d=animations[Math.round(Math.random()*(animations.length-1))];window.setTimeout(function(){popup.setPosition(b);$("#popup").tooltip({title:'<div class="person">'+a+'</div><div class="location">'+f.get("location")+"</div>",html:!0,placement:"bottom"});
$("#popup").tooltip("show")},2E3);app.animation[d](map,map.getView().getCenter(),b)}},5E3);